<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Home | MeteoCal</title>
    </h:head>
    <h:body>
        Welcome back #{userBean.loggedUser.name} #{userBean.loggedUser.surname}
        <p:link outcome="test" value="Weather at Galliate"/>
        <br/>
        <p:link outcome="#{navigationBean.toSearchResultsPage()}" value="Results"/>
        <br/>
        <p:link outcome="/user/settings" value="Settings"/>
        <br/>
        <p:link outcome="/user/favoriteUsers" value="Favorite Users"/>
        <br/>
        <p:link outcome="/event/create" value="Create Event"/>
        <h:form>
            <p:commandLink action="#{loginBean.logout()}" value="Logout"/>
        </h:form>
        <p>Number of notifications to be read: #{userBean.numOfNotReadNotifications}</p>
        <ul>
            <ui:repeat value="#{userBean.notifications}" var="notification">
                <li>
                    <p>[#{notification.event.title}] #{notification.text}</p>
                </li>
            </ui:repeat>
        </ul>
        <p>Participating events:</p>
        <ul>
            <ui:repeat value="#{userBean.eventsInCalendar}" var="event">
                <li>
                    <h:link value="#{event.title}" outcome="/event/detail">
                        <f:param name="id" value="#{event.id}" />
                    </h:link>
                </li>
            </ui:repeat>
        </ul>
        <p>Pending invitations:</p>
        <ul>
            <ui:repeat value="#{userBean.eventsInvitedTo}" var="event">
                <li>
                    <h:link value="#{event.title}" outcome="/event/detail">
                        <f:param name="id" value="#{event.id}" />
                    </h:link>
                </li>
            </ui:repeat>
        </ul>
    </h:body>
</html>

